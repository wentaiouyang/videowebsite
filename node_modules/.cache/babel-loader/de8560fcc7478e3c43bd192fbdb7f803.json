{"ast":null,"code":"var _jsxFileName = \"/Users/wentai/work space/wis/src/components/SearchBar.js\";\nimport React, { Component } from 'react';\nimport Fuse from 'fuse.js';\nimport VidComponent from \"./VidComponent\";\nimport './SearchBar.css';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\nimport axios from 'axios';\n\nclass Search extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSearch = e => {\n      console.log(e.target.search.value);\n      e.preventDefault();\n      let options = {\n        shouldSort: true,\n        threshold: 0.5,\n        location: 0,\n        distance: 100,\n        minMatchCharLength: 1,\n        keys: [\"title\"]\n      };\n      let fuse = new Fuse(this.state.list, options); // \"list\" is the item array\n\n      this.setState({\n        result: fuse.search(e.target.search.value),\n        keyword: e.target.search.value\n      });\n    };\n\n    this.state = {\n      list: '',\n      result: undefined,\n      new_list: undefined,\n      search_list: [],\n      keyword: ''\n    };\n  }\n\n  componentDidMount() {\n    const url = 'https://cors-anywhere.herokuapp.com/https://portfolioowen.000webhostapp.com/react-backend/index.php';\n    axios.get(url).then(res => {\n      this.setState({\n        list: res.data.video\n      });\n      console.log(res.data);\n    }).then(() => {\n      const new_list = this.state.list.map(a => ({\n        item: a\n      }));\n      const search_list = this.state.list.map(a => a.title);\n      console.log(new_list);\n      console.log(this.state.result);\n      this.setState({\n        new_list: new_list\n      });\n      this.setState({\n        search_list: search_list\n      });\n    });\n    console.log(this.state.search_list);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"searchContainer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSearch,\n      autoComplete: \"off\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(TextInput, {\n      name: \"search\",\n      placeholder: \"Search...\",\n      trigger: '',\n      options: this.state.search_list,\n      matchAny: true,\n      Component: \"input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"videoArea\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, this.state.keyword !== '' ? React.createElement(VidComponent, {\n      source: this.state.result,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }) : React.createElement(VidComponent, {\n      source: this.state.new_list,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/Users/wentai/work space/wis/src/components/SearchBar.js"],"names":["React","Component","Fuse","VidComponent","TextInput","axios","Search","constructor","props","handleSearch","e","console","log","target","search","value","preventDefault","options","shouldSort","threshold","location","distance","minMatchCharLength","keys","fuse","state","list","setState","result","keyword","undefined","new_list","search_list","componentDidMount","url","get","then","res","data","video","map","a","item","title","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Fuse from 'fuse.js';\nimport VidComponent from \"./VidComponent\";\nimport './SearchBar.css';\nimport TextInput from 'react-autocomplete-input';\nimport 'react-autocomplete-input/dist/bundle.css';\nimport axios from 'axios';\n\nclass Search extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            list: '',\n            result: undefined,\n            new_list: undefined,\n            search_list:[],\n            keyword: ''\n        }\n    };\n\n    componentDidMount() {\n        const url = 'https://cors-anywhere.herokuapp.com/https://portfolioowen.000webhostapp.com/react-backend/index.php';\n        axios.get(url)\n            .then((res)=>{\n                this.setState({list:res.data.video});\n                console.log(res.data);\n            })\n            .then(()=>{\n                const new_list=this.state.list.map(a=>({item:a}));\n                const search_list = this.state.list.map(a=>(a.title));\n                console.log(new_list);\n                console.log(this.state.result);\n                this.setState({new_list:new_list});\n                this.setState({search_list:search_list});\n            });\n        console.log(this.state.search_list);\n    }\n\n\n    handleSearch=(e)=>{\n        console.log(e.target.search.value);\n        e.preventDefault();\n        let options = {\n            shouldSort: true,\n            threshold: 0.5,\n            location: 0,\n            distance: 100,\n            minMatchCharLength: 1,\n            keys: [\n                \"title\"\n            ]\n        };\n        let fuse = new Fuse(this.state.list, options); // \"list\" is the item array\n        this.setState({\n            result: fuse.search(e.target.search.value),\n            keyword: e.target.search.value\n        });\n    };\n\n\n    render() {\n        return (\n            <div className = \"searchContainer\">\n                <form onSubmit={this.handleSearch} autoComplete=\"off\">\n                    {/*<input name='search' type=\"text\" placeholder = \"Search...\"/>*/}\n                    <TextInput name='search' placeholder = \"Search...\" trigger={''} options={this.state.search_list} matchAny={true} Component=\"input\"/>\n                    <button></button>\n                </form>\n                <div className=\"videoArea\">\n                {this.state.keyword !== '' ? <VidComponent source={this.state.result}/> : <VidComponent source={this.state.new_list}/>}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}