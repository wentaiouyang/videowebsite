{"ast":null,"code":"import _slicedToArray from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import axios from'axios';import{AppContext}from'../context/AppContext';import'./MyProfilePage.css';function MyProfilePage(){var _useContext=useContext(AppContext),currentUser=_useContext.currentUser;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),myVids=_useState2[0],setMyVids=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),Bio=_useState4[0],setBio=_useState4[1];useEffect(function(){var url='http://localhost:80/react-backend/profile.php';var formData=new FormData();formData.append('uploader',currentUser);axios.post(url,formData).then(function(res){console.log(res);setMyVids(res.data.video);}).catch(function(err){return console.log(err);});// get the bio from the database and sent the data to state\ngetBio();},[]);var getBio=function getBio(){var url='http://localhost:80/react-backend/profile_get_bio.php';var formData=new FormData();console.log(currentUser);formData.append('username',currentUser);axios.post(url,formData).then(function(res){console.log(res.data);setBio(res.data.userbio[0].bio);}).catch(function(err){return console.log(err);});};var buttonClick=function buttonClick(){var modal=document.getElementById('myModal');modal.style.display=\"block\";};var spanClick=function spanClick(){var modal=document.getElementById('myModal');modal.style.display=\"none\";};var handleSubmit=function handleSubmit(e){e.preventDefault();var newBio=e.target.newBio.value;console.log(newBio);// send the new username to php\ndocument.getElementById('myModal').style.display=\"none\";var add_bio_url='http://localhost:80/react-backend/profile_post_bio.php';var formData=new FormData();formData.append('newBio',newBio);formData.append('username',currentUser);axios.post(add_bio_url,formData).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);});// document.getElementById('bio').innerText = newBio;\ngetBio();};return React.createElement(\"div\",{className:\"profilePage\"},React.createElement(\"div\",{className:\"welcomeTitle\"},React.createElement(\"h1\",{id:\"welcomeTitle\"},\"Hi \",currentUser,\", welcome to your profile!\"),React.createElement(\"p\",{id:\"bio\"},\" \",Bio?Bio:'Write something about yourself...'),React.createElement(\"button\",{onClick:buttonClick,id:\"resetBtn\"},\"Edit Bio\"),React.createElement(\"form\",{className:\"resetWindow\",onSubmit:handleSubmit},React.createElement(\"div\",{id:\"myModal\",class:\"modal\"},React.createElement(\"div\",{class:\"modal-content\"},React.createElement(\"span\",{class:\"close\",onClick:spanClick},\"\\xD7\"),React.createElement(\"input\",{placeholder:\"Enter your new new Bio here\",name:\"newBio\"}),React.createElement(\"button\",{type:\"submit\"},\"confirm\"))))),React.createElement(\"div\",{className:\"vid-row\"},myVids?Object.values(myVids).map(function(vid){return React.createElement(\"div\",{className:\"video\"},React.createElement(\"video\",{controls:true,width:\"350\",autoPlay:true,muted:true,loop:true,src:vid.url}));}):''));}export default MyProfilePage;","map":{"version":3,"sources":["/Users/wentai/work space/wis/src/pages/MyProfilePage.js"],"names":["React","useState","useEffect","useContext","axios","AppContext","MyProfilePage","currentUser","myVids","setMyVids","Bio","setBio","url","formData","FormData","append","post","then","res","console","log","data","video","catch","err","getBio","userbio","bio","buttonClick","modal","document","getElementById","style","display","spanClick","handleSubmit","e","preventDefault","newBio","target","value","add_bio_url","Object","values","map","vid"],"mappings":"mJAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,UAApC,KAAqD,OAArD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,uBAA3B,CACA,MAAO,qBAAP,CAGA,QAASC,CAAAA,aAAT,EAAyB,iBAGCH,UAAU,CAACE,UAAD,CAHX,CAGdE,WAHc,aAGdA,WAHc,eAION,QAAQ,CAAC,EAAD,CAJf,wCAIdO,MAJc,eAINC,SAJM,8BAKCR,QAAQ,CAAC,EAAD,CALT,yCAKdS,GALc,eAKTC,MALS,eAOrBT,SAAS,CAAC,UAAM,CACZ,GAAMU,CAAAA,GAAG,CAAG,+CAAZ,CACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BR,WAA5B,EACAH,KAAK,CAACY,IAAN,CAAWJ,GAAX,CAAgBC,QAAhB,EAA0BI,IAA1B,CAA+B,SAACC,GAAD,CAAO,CAClCC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACAT,SAAS,CAACS,GAAG,CAACG,IAAJ,CAASC,KAAV,CAAT,CACH,CAHD,EAGGC,KAHH,CAGS,SAACC,GAAD,QAAOL,CAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAP,EAHT,EAKA;AACAC,MAAM,GAET,CAZQ,CAYN,EAZM,CAAT,CAcA,GAAMA,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAK,CAEhB,GAAMb,CAAAA,GAAG,CAAG,uDAAZ,CACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAK,OAAO,CAACC,GAAR,CAAYb,WAAZ,EACAM,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BR,WAA5B,EACAH,KAAK,CAACY,IAAN,CAAWJ,GAAX,CAAeC,QAAf,EAAyBI,IAAzB,CACI,SAACC,GAAD,CAAO,CACHC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,EACAV,MAAM,CAACO,GAAG,CAACG,IAAJ,CAASK,OAAT,CAAiB,CAAjB,EAAoBC,GAArB,CAAN,CACH,CAJL,EAKEJ,KALF,CAKQ,SAACC,GAAD,QAAOL,CAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAP,EALR,EAOH,CAbD,CAeA,GAAMI,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB,GAAIC,CAAAA,KAAK,CAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAZ,CACAF,KAAK,CAACG,KAAN,CAAYC,OAAZ,CAAsB,OAAtB,CACH,CAHD,CAKA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,GAAIL,CAAAA,KAAK,CAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAZ,CACAF,KAAK,CAACG,KAAN,CAAYC,OAAZ,CAAsB,MAAtB,CACH,CAHD,CAKA,GAAME,CAAAA,YAAY,CAAC,QAAbA,CAAAA,YAAa,CAACC,CAAD,CAAO,CACtBA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,MAAM,CAAGF,CAAC,CAACG,MAAF,CAASD,MAAT,CAAgBE,KAA7B,CACArB,OAAO,CAACC,GAAR,CAAYkB,MAAZ,EACA;AACAR,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,CAAmD,MAAnD,CACA,GAAMQ,CAAAA,WAAW,CAAG,wDAApB,CACA,GAAM5B,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAjB,CACAD,QAAQ,CAACE,MAAT,CAAgB,QAAhB,CAAyBuB,MAAzB,EACAzB,QAAQ,CAACE,MAAT,CAAgB,UAAhB,CAA4BR,WAA5B,EACAH,KAAK,CAACY,IAAN,CAAWyB,WAAX,CAAuB5B,QAAvB,EAAiCI,IAAjC,CAAsC,SAACC,GAAD,QAAOC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,CAAP,EAAtC,EAAoEE,KAApE,CAA0E,SAACC,GAAD,QAAOL,CAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAP,EAA1E,EACA;AACAC,MAAM,GACT,CAbD,CAeA,MACI,4BAAK,SAAS,CAAG,aAAjB,EACI,2BAAK,SAAS,CAAG,cAAjB,EACI,0BAAI,EAAE,CAAG,cAAT,QAA4BlB,WAA5B,8BADJ,CAEI,yBAAG,EAAE,CAAG,KAAR,MAAgBG,GAAG,CAACA,GAAD,CAAK,mCAAxB,CAFJ,CAGI,8BAAQ,OAAO,CAAIkB,WAAnB,CAAgC,EAAE,CAAG,UAArC,aAHJ,CAII,4BAAM,SAAS,CAAG,aAAlB,CAAgC,QAAQ,CAAEO,YAA1C,EACI,2BAAK,EAAE,CAAC,SAAR,CAAkB,KAAK,CAAC,OAAxB,EACI,2BAAK,KAAK,CAAC,eAAX,EACI,4BAAM,KAAK,CAAC,OAAZ,CAAoB,OAAO,CAAID,SAA/B,SADJ,CAEI,6BAAO,WAAW,CAAG,6BAArB,CAAmD,IAAI,CAAG,QAA1D,EAFJ,CAGI,8BAAQ,IAAI,CAAC,QAAb,YAHJ,CADJ,CADJ,CAJJ,CADJ,CAeI,2BAAK,SAAS,CAAG,SAAjB,EACK1B,MAAM,CAACkC,MAAM,CAACC,MAAP,CAAcnC,MAAd,EAAsBoC,GAAtB,CAA0B,SAACC,GAAD,CAAS,CACvC,MACI,4BAAK,SAAS,CAAC,OAAf,EACI,6BAAO,QAAQ,KAAf,CAAgB,KAAK,CAAG,KAAxB,CAA8B,QAAQ,KAAtC,CAAuC,KAAK,KAA5C,CAA6C,IAAI,KAAjD,CAAkD,GAAG,CAAIA,GAAG,CAACjC,GAA7D,EADJ,CADJ,CAKH,CANO,CAAD,CAMJ,EAPP,CAfJ,CADJ,CA4BH,CAED,cAAeN,CAAAA,aAAf","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport axios from 'axios';\nimport { AppContext } from '../context/AppContext';\nimport './MyProfilePage.css';\n\n\nfunction MyProfilePage() {\n\n\n    const {currentUser} = useContext(AppContext);\n    const [myVids, setMyVids] = useState('');\n    const [Bio, setBio] = useState('');\n\n    useEffect(() => {\n        const url = 'http://localhost:80/react-backend/profile.php';\n        const formData = new FormData;\n        formData.append('uploader', currentUser);\n        axios.post(url, formData).then((res)=>{\n            console.log(res);\n            setMyVids(res.data.video);\n        }).catch((err)=>console.log(err));\n\n        // get the bio from the database and sent the data to state\n        getBio();\n\n    }, []);\n\n    const getBio = () =>{\n\n        const url = 'http://localhost:80/react-backend/profile_get_bio.php';\n        const formData = new FormData;\n        console.log(currentUser);\n        formData.append('username', currentUser);\n        axios.post(url,formData).then(\n            (res)=>{\n                console.log(res.data);\n                setBio(res.data.userbio[0].bio);\n            }\n        ).catch((err)=>console.log(err));\n\n    };\n    \n    const buttonClick = () => {\n        let modal = document.getElementById('myModal');\n        modal.style.display = \"block\";\n    };\n\n    const spanClick = () => {\n        let modal = document.getElementById('myModal');\n        modal.style.display = \"none\";\n    };\n   \n    const handleSubmit=(e) => {\n        e.preventDefault();\n        let newBio = e.target.newBio.value;\n        console.log(newBio);\n        // send the new username to php\n        document.getElementById('myModal').style.display = \"none\";\n        const add_bio_url = 'http://localhost:80/react-backend/profile_post_bio.php';\n        const formData = new FormData;\n        formData.append('newBio',newBio);\n        formData.append('username', currentUser);\n        axios.post(add_bio_url,formData).then((res)=>console.log(res.data)).catch((err)=>console.log(err));\n        // document.getElementById('bio').innerText = newBio;\n        getBio();\n    };\n\n    return(\n        <div className = \"profilePage\">\n            <div className = \"welcomeTitle\">\n                <h1 id = \"welcomeTitle\">Hi {currentUser}, welcome to your profile!</h1>\n                <p id = \"bio\"> {Bio?Bio:'Write something about yourself...'}</p>\n                <button onClick = {buttonClick} id = \"resetBtn\">Edit Bio</button>\n                <form className = \"resetWindow\" onSubmit={handleSubmit}>\n                    <div id=\"myModal\" class=\"modal\">\n                        <div class=\"modal-content\">\n                            <span class=\"close\" onClick = {spanClick}>&times;</span>\n                            <input placeholder = \"Enter your new new Bio here\" name = \"newBio\"/>\n                            <button type=\"submit\">confirm</button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div className = \"vid-row\">\n                {myVids?Object.values(myVids).map((vid) => {\n                    return(\n                        <div className=\"video\">\n                            <video controls width = '350' autoPlay muted loop src = {vid.url} />\n                        </div>\n                    );\n                }):''}\n            </div>\n        </div>\n    );\n    \n}\n\nexport default MyProfilePage;"]},"metadata":{},"sourceType":"module"}