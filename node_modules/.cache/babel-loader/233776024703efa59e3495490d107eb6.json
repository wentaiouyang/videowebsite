{"ast":null,"code":"import _defineProperty from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import InputField from'./InputField';import SubmitButton from'./SubmitButton';import'./LoginForm.css';import logo from'../images/logo.png';import axios from'axios';var LoginForm=/*#__PURE__*/function(_Component){_inherits(LoginForm,_Component);function LoginForm(props){var _this;_classCallCheck(this,LoginForm);_this=_possibleConstructorReturn(this,_getPrototypeOf(LoginForm).call(this,props));_this.state={username:'',password:''};_this.doLogin=_this.doLogin.bind(_assertThisInitialized(_this));return _this;}_createClass(LoginForm,[{key:\"setInputValue\",value:function setInputValue(property,val){val=val.trim();if(val.length>40){return;}this.setState(_defineProperty({},property,val));}},{key:\"resetForm\",value:function resetForm(){this.setState({username:'',password:''});}},{key:\"doLogin\",value:function doLogin(){var _this2=this;if(!this.state.username){return;}if(!this.state.password){return;}try{var _this$state=this.state,username=_this$state.username,password=_this$state.password;var formData=new FormData();formData.append(\"username\",username);formData.append(\"password\",password);var url='http://localhost:80/react-backend/login.php';axios.post(url,formData).then(function(res){console.log(res.data);if(res.data==='ok'){_this2.props.auth();_this2.props.currentUser(username);}}).catch(function(err){return console.log(err);});}catch(e){console.log(e);this.resetForm();}}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"loginForm\"},React.createElement(\"div\",{className:\"signin_title\"},React.createElement(\"img\",{className:\"title_logo\",src:logo,alt:\"logo\"}),React.createElement(\"p\",null,\"Sign in\"),React.createElement(\"p\",null,\"for more features\")),React.createElement(\"div\",{className:\"input_container\"},React.createElement(\"label\",null,\"Username: \"),React.createElement(InputField,{type:\"text\",placeholder:\"Username\",value:this.state.username?this.state.username:'',onChange:function onChange(val){return _this3.setInputValue('username',val);}})),React.createElement(\"div\",{className:\"input_container\"},React.createElement(\"label\",null,\"Password: \"),React.createElement(InputField,{type:\"password\",placeholder:\"Password\",value:this.state.password?this.state.password:'',onChange:function onChange(val){return _this3.setInputValue('password',val);}})),React.createElement(\"div\",{className:\"btn_row\"},React.createElement(SubmitButton,{text:\"Register\",onClick:this.props.showSignup}),React.createElement(SubmitButton,{text:\"Login\",onClick:this.doLogin})));}}]);return LoginForm;}(Component);export default LoginForm;","map":{"version":3,"sources":["/Users/wentai/work space/wis/src/components/LoginForm.js"],"names":["React","Component","InputField","SubmitButton","logo","axios","LoginForm","props","state","username","password","doLogin","bind","property","val","trim","length","setState","formData","FormData","append","url","post","then","res","console","log","data","auth","currentUser","catch","err","e","resetForm","setInputValue","showSignup"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport InputField from './InputField';\nimport SubmitButton from './SubmitButton';\nimport './LoginForm.css';\nimport logo from '../images/logo.png'\nimport axios from 'axios';\n\n\n\nclass LoginForm extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n        }\n        this.doLogin=this.doLogin.bind(this);\n    }\n\n    setInputValue(property, val) {\n        val = val.trim();\n        if (val.length > 40) {\n            return;\n        }\n        this.setState({\n            [property]: val\n        })\n    }\n\n    resetForm() {\n        this.setState({\n            username: '',\n            password: '',\n        })\n    }\n\n    doLogin() {\n        if (!this.state.username) {\n            return;\n        }\n        if (!this.state.password) {\n            return;\n        }\n\n        try {\n            const {username, password} = this.state;\n            let formData = new FormData;\n            formData.append(\"username\", username);\n            formData.append(\"password\", password);\n            const url = 'http://localhost:80/react-backend/login.php';\n            axios.post(url,formData).then(res =>{\n                console.log(res.data);\n                if (res.data==='ok'){\n                    this.props.auth();\n                    this.props.currentUser(username);\n                }\n            }).catch(err => console.log(err));\n        }\n        catch(e) {\n            console.log(e);\n            this.resetForm();\n        }\n    }\n    \n    render() {\n\n        return (\n            <div className = \"loginForm\">\n                <div className = \"signin_title\">\n                    <img className=\"title_logo\" src={logo} alt=\"logo\"/>\n                    <p>Sign in</p>\n                    <p>for more features</p>\n                </div>\n                <div className = \"input_container\">\n                    <label>Username: </label>\n                    <InputField \n                        type = 'text'\n                        placeholder = 'Username'\n                        value = {this.state.username ? this.state.username : ''}\n                        onChange = {(val) => this.setInputValue('username', val)}\n                    />\n                </div>\n\n                <div className = \"input_container\">\n                    <label>Password: </label>\n                    <InputField \n                        type = 'password'\n                        placeholder = 'Password'\n                        value = {this.state.password ? this.state.password : ''}\n                        onChange = {(val) => this.setInputValue('password', val)}\n                    />\n                </div>\n\n                <div className = \"btn_row\">\n                    <SubmitButton \n                        text = 'Register'\n                        onClick = {this.props.showSignup}\n                    />\n                    <SubmitButton \n                        text = 'Login'\n                        onClick = {this.doLogin}\n                    />\n                </div>\n            </div>\n\n        );\n    }\n}\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}