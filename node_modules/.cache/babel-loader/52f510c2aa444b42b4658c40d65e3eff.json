{"ast":null,"code":"import _classCallCheck from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/wentai/work space/wis/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import CommentInput from'../components/CommentInput';import CommentList from'../components/CommentList';import{AppContext}from'../context/AppContext';import whiteStar from'../images/star_white.png';import blackStar from'../images/star_black.png';import axios from'axios';import'./VidPlayPage.css';import{NavLink}from'react-router-dom';var VidPlayPage=/*#__PURE__*/function(_Component){_inherits(VidPlayPage,_Component);function VidPlayPage(props){var _this;_classCallCheck(this,VidPlayPage);_this=_possibleConstructorReturn(this,_getPrototypeOf(VidPlayPage).call(this,props));_this.handleFavorite=function(){_this.setState({favorite:!_this.state.favorite});};_this.state={comments:[],favorite:false,v_id:_this.props.match.params.id};return _this;}_createClass(VidPlayPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log('vid:'+this.state.v_id);var vid=document.getElementsByClassName(\"vidInList\");[].forEach.call(vid,function(item){item.addEventListener('mouseover',hoverVideo,false);item.addEventListener('mouseout',hideVideo,false);});function hoverVideo(e){this.play();}function hideVideo(e){this.pause();}var formData=new FormData();formData.append('videoid',this.state.v_id);var com_url='http://localhost:80/react-backend/getcomments.php';axios.post(com_url,formData).then(function(res){console.log(res.data);_this2.setState({comments:res.data.comments});}).catch(function(err){return console.log(err);});}},{key:\"handleSubmitComment\",value:function handleSubmitComment(comment){var _this3=this;if(!comment.content)return alert('The comments cannot be empty! Please enter your comments.');var formData=new FormData();console.log(comment.username,comment.content);formData.append('user',comment.username);formData.append('content',comment.content);formData.append('videoid',this.state.v_id);var url='http://localhost:80/react-backend/addcomments.php';axios.post(url,formData).then(function(res){console.log(res);}).catch(function(err){return console.log(err);});setTimeout(function(){var formData=new FormData();formData.append('videoid',_this3.state.v_id);var com_url='http://localhost:80/react-backend/getcomments.php';axios.post(com_url,formData).then(function(res){console.log(res.data);_this3.setState({comments:res.data.comments});}).catch(function(err){return console.log(err);});},500);// this.state.comments.push(comment);\n// this.setState({\n//   comments: this.state.comments\n// })\n}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(AppContext.Consumer,null,function(_ref){var videos=_ref.videos;var video=videos[_this4.state.v_id-1];var vid_list=[{url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_sky.mp4'},{url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_fire.mp4'},{url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_trees.mp4'},{url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_beer.mp4'}];return React.createElement(\"div\",{className:\"vidPlayPage\"},React.createElement(\"div\",{className:\"vidNComments\"},React.createElement(\"div\",{className:\"vidPlayWindow\"},video?React.createElement(\"video\",{width:\"800\",height:\"450\",controls:true,autoPlay:true,src:video.url}):''),React.createElement(\"div\",{className:\"vidDescription\"},React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Description\"),video?React.createElement(\"p\",null,video.description):''),React.createElement(\"div\",null,React.createElement(\"div\",{className:\"collectIcon\"},_this4.state.favorite?React.createElement(\"img\",{id:\"starIcon\",src:blackStar,width:\"25\",onClick:_this4.handleFavorite}):React.createElement(\"img\",{id:\"starIcon\",src:whiteStar,width:\"25\",onClick:_this4.handleFavorite}),\"Favorite\"))),React.createElement(\"div\",{className:\"commentsArea\"},React.createElement(CommentInput,{onSubmit:_this4.handleSubmitComment.bind(_this4)}),React.createElement(CommentList,{comments:_this4.state.comments}))),React.createElement(\"div\",{className:\"vidsList\"},vid_list.map(function(vid,index){return React.createElement(NavLink,{to:\"/video/\".concat(vid.id),activeStyle:{textDecoration:'none'}},React.createElement(\"video\",{muted:true,className:\"vidInList\",width:\"250\",height:\"140\",src:vid.url}));})));});}}]);return VidPlayPage;}(Component);export default VidPlayPage;","map":{"version":3,"sources":["/Users/wentai/work space/wis/src/pages/VidPlayPage.js"],"names":["React","Component","CommentInput","CommentList","AppContext","whiteStar","blackStar","axios","NavLink","VidPlayPage","props","handleFavorite","setState","favorite","state","comments","v_id","match","params","id","console","log","vid","document","getElementsByClassName","forEach","call","item","addEventListener","hoverVideo","hideVideo","e","play","pause","formData","FormData","append","com_url","post","then","res","data","catch","err","comment","content","alert","username","url","setTimeout","videos","video","vid_list","description","handleSubmitComment","bind","map","index","textDecoration"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport CommentInput from '../components/CommentInput'\nimport CommentList from '../components/CommentList'\nimport { AppContext } from '../context/AppContext';\nimport whiteStar from '../images/star_white.png'\nimport blackStar from '../images/star_black.png'\nimport axios from 'axios';\nimport './VidPlayPage.css';\nimport { NavLink } from 'react-router-dom';\n\n\nclass VidPlayPage extends Component {\n\n    constructor (props) {\n        super(props);\n        this.state = {\n          comments: [],\n          favorite: false,\n            v_id :this.props.match.params.id,\n        }\n      }\n\n    componentDidMount() {\n        console.log('vid:'+this.state.v_id);\n        var vid = document.getElementsByClassName(\"vidInList\");\n        [].forEach.call(vid, function (item) {\n            item.addEventListener('mouseover', hoverVideo, false);\n            item.addEventListener('mouseout', hideVideo, false);\n        });\n        function hoverVideo(e){   \n            this.play();\n        }\n        function hideVideo(e){\n            this.pause();\n        }\n        const formData = new FormData;\n        formData.append('videoid',this.state.v_id);\n        const com_url = 'http://localhost:80/react-backend/getcomments.php'\n        axios.post(com_url,formData).then((res)=>{\n            console.log(res.data);\n            this.setState({comments:res.data.comments})\n        }).catch((err)=>console.log(err));\n    }\n\n\n    handleSubmitComment (comment) {\n        if (!comment.content) return alert('The comments cannot be empty! Please enter your comments.');\n        const formData = new FormData;\n        console.log(comment.username,comment.content);\n        formData.append('user',comment.username);\n        formData.append('content',comment.content);\n        formData.append('videoid',this.state.v_id);\n        const url = 'http://localhost:80/react-backend/addcomments.php';\n        axios.post(url, formData).then((res)=>{\n            console.log(res);\n        }).catch((err)=>console.log(err));\n\n        setTimeout(()=>{\n            const formData = new FormData;\n            formData.append('videoid',this.state.v_id);\n            const com_url = 'http://localhost:80/react-backend/getcomments.php'\n            axios.post(com_url,formData).then((res)=>{\n                console.log(res.data);\n                this.setState({comments:res.data.comments})\n            }).catch((err)=>console.log(err));\n            },500\n        );\n        // this.state.comments.push(comment);\n        // this.setState({\n        //   comments: this.state.comments\n        // })\n\n    }\n\n    handleFavorite = () => {\n        this.setState({favorite:!this.state.favorite});\n    };\n\n    render(){\n\n        return (\n            <AppContext.Consumer>\n                {({videos})=>{\n                    let video = videos[this.state.v_id-1];\n                    const vid_list = [\n                        {url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_sky.mp4'},\n                        {url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_fire.mp4'},\n                        {url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_trees.mp4'},\n                        {url:'https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_beer.mp4'},\n                    ];\n                    return(\n                        <div className = \"vidPlayPage\">\n                            <div className = \"vidNComments\">\n                                <div className = \"vidPlayWindow\">\n                                    {video?<video width = \"800\" height = \"450\" controls autoPlay src = {video.url} />:''}\n                                </div>\n                                <div className = \"vidDescription\">\n                                    <div>\n                                        <h2>Description</h2>\n                                        {video?<p>{video.description}</p>:''}\n                                    </div>\n                                    <div>\n                                        <div className = \"collectIcon\">\n                                            {this.state.favorite?\n                                            <img id = \"starIcon\" src = {blackStar} width = \"25\" onClick = {this.handleFavorite} />:\n                                            <img id = \"starIcon\" src = {whiteStar} width = \"25\" onClick = {this.handleFavorite} />\n                                            }\n                                            Favorite\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className = \"commentsArea\">\n                                    <CommentInput onSubmit={this.handleSubmitComment.bind(this)} />\n                                    <CommentList comments={this.state.comments} />\n                                </div>\n                            </div>\n                            <div className = \"vidsList\">\n                                {vid_list.map((vid, index)=>{\n                                    return(\n                                        <NavLink to={`/video/${vid.id}`} activeStyle={{textDecoration:'none'}}>\n                                            <video muted className = \"vidInList\" width = \"250\" height = \"140\" src = {vid.url} />\n                                        </NavLink>\n                                    )\n                                })}\n                                \n                                {/* <video width = \"250\" height = \"140\" src = \"https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_sky.mp4\" />\n                                <video width = \"250\" height = \"140\" src = \"https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_bird.mp4\" />\n                                <video width = \"250\" height = \"140\" src = \"https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_bird.mp4\" />\n                                <video width = \"250\" height = \"140\" src = \"https://wis7202.s3-ap-southeast-2.amazonaws.com/vid_bird.mp4\" /> */}\n                            </div>\n                        </div>\n                    )\n                }}\n            </AppContext.Consumer>\n        );\n    }\n}\n\nexport default VidPlayPage;"]},"metadata":{},"sourceType":"module"}