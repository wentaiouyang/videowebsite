{"ast":null,"code":"var _jsxFileName = \"/Users/wentai/work space/wis/src/pages/MyProfilePage.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { AppContext } from '../context/AppContext';\nimport './MyProfilePage.css';\n\nfunction MyProfilePage() {\n  const {\n    currentUser\n  } = useContext(AppContext);\n  const [state, setState] = useState({\n    myVids: '',\n    new_myVids: undefined\n  });\n  const [bio, setBio] = useState('');\n  useEffect(() => {\n    const url = 'http://localhost:80/react-backend/profile.php';\n    const formData = new FormData();\n    formData.append('uploader', currentUser);\n    axios.post(url, formData).then(res => {\n      console.log(res);\n      setState({\n        myVids: res.data.video\n      });\n    }).catch(err => console.log(err));\n  }, []);\n\n  const buttonClick = () => {\n    let modal = document.getElementById('myModal');\n    modal.style.display = \"block\";\n  };\n\n  const spanClick = () => {\n    let modal = document.getElementById('myModal');\n    modal.style.display = \"none\";\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    let newBio = e.target.newBio.value;\n    console.log(newBio); // send the new username to php\n\n    document.getElementById('myModal').style.display = \"none\";\n    const add_bio_url = 'http://localhost:80/react-backend/profile_post_bio.php';\n    const formData = new FormData();\n    formData.append('newBio', newBio);\n    formData.append('username', currentUser);\n    axios.post(add_bio_url, formData).then(res => console.log(res.data)).catch(err => console.log(err)); // get the bio from the database and sent the data to state\n\n    setTimeout(() => {\n      const url = 'http://localhost:80/react-backend/profile_get_bio.php';\n      const formData = new FormData();\n      console.log(currentUser);\n      formData.append('username', currentUser);\n      axios.post(url, formData).then(res => {\n        console.log(res.data);\n        setBio(res.data.bio[0]);\n      }).catch(err => console.log(err));\n    }, 500);\n    document.getElementById('bio').innerText = newBio;\n  };\n\n  return React.createElement(\"div\", {\n    className: \"profilePage\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"welcomeTitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    id: \"welcomeTitle\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Hi \", currentUser, \", welcome to your profile!\"), React.createElement(\"p\", {\n    id: \"bio\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \" Write something about yourself...\"), React.createElement(\"button\", {\n    onClick: buttonClick,\n    id: \"resetBtn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, \"Edit Bio\"), React.createElement(\"form\", {\n    className: \"resetWindow\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"myModal\",\n    class: \"modal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    class: \"modal-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    class: \"close\",\n    onClick: spanClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"\\xD7\"), React.createElement(\"input\", {\n    placeholder: \"Enter your new new Bio here\",\n    name: \"newBio\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"confirm\"))))), React.createElement(\"div\", {\n    className: \"vid-row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, state.myVids ? Object.values(state.myVids).map(vid => {\n    return React.createElement(\"div\", {\n      className: \"video\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"video\", {\n      controls: true,\n      width: \"350\",\n      autoPlay: true,\n      muted: true,\n      loop: true,\n      src: vid.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }));\n  }) : ''));\n}\n\nexport default MyProfilePage;","map":{"version":3,"sources":["/Users/wentai/work space/wis/src/pages/MyProfilePage.js"],"names":["React","useState","useEffect","useContext","axios","AppContext","MyProfilePage","currentUser","state","setState","myVids","new_myVids","undefined","bio","setBio","url","formData","FormData","append","post","then","res","console","log","data","video","catch","err","buttonClick","modal","document","getElementById","style","display","spanClick","handleSubmit","e","preventDefault","newBio","target","value","add_bio_url","setTimeout","innerText","Object","values","map","vid"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,UAApC,QAAqD,OAArD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,OAAO,qBAAP;;AAEA,SAASC,aAAT,GAAyB;AAGrB,QAAM;AAACC,IAAAA;AAAD,MAAgBJ,UAAU,CAACE,UAAD,CAAhC;AACA,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC;AAC/BS,IAAAA,MAAM,EAAE,EADuB;AAE/BC,IAAAA,UAAU,EAAEC;AAFmB,GAAD,CAAlC;AAIA,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBb,QAAQ,CAAC,EAAD,CAA9B;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMa,GAAG,GAAG,+CAAZ;AACA,UAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BX,WAA5B;AACAH,IAAAA,KAAK,CAACe,IAAN,CAAWJ,GAAX,EAAgBC,QAAhB,EAA0BI,IAA1B,CAAgCC,GAAD,IAAO;AAClCC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAZ,MAAAA,QAAQ,CAAC;AAACC,QAAAA,MAAM,EAAEW,GAAG,CAACG,IAAJ,CAASC;AAAlB,OAAD,CAAR;AACH,KAHD,EAGGC,KAHH,CAGUC,GAAD,IAAOL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAHhB;AAIH,GARQ,EAQN,EARM,CAAT;;AAWA,QAAMC,WAAW,GAAG,MAAM;AACtB,QAAIC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAZ;AACAF,IAAAA,KAAK,CAACG,KAAN,CAAYC,OAAZ,GAAsB,OAAtB;AACH,GAHD;;AAKA,QAAMC,SAAS,GAAG,MAAM;AACpB,QAAIL,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAZ;AACAF,IAAAA,KAAK,CAACG,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACH,GAHD;;AAKA,QAAME,YAAY,GAAEC,CAAD,IAAO;AACtBA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIC,MAAM,GAAGF,CAAC,CAACG,MAAF,CAASD,MAAT,CAAgBE,KAA7B;AACAlB,IAAAA,OAAO,CAACC,GAAR,CAAYe,MAAZ,EAHsB,CAItB;;AACAR,IAAAA,QAAQ,CAACC,cAAT,CAAwB,SAAxB,EAAmCC,KAAnC,CAAyCC,OAAzC,GAAmD,MAAnD;AACA,UAAMQ,WAAW,GAAG,wDAApB;AACA,UAAMzB,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyBoB,MAAzB;AACAtB,IAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BX,WAA5B;AACAH,IAAAA,KAAK,CAACe,IAAN,CAAWsB,WAAX,EAAuBzB,QAAvB,EAAiCI,IAAjC,CAAuCC,GAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB,CAA7C,EAAoEE,KAApE,CAA2EC,GAAD,IAAOL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CAAjF,EAVsB,CAWtB;;AACAe,IAAAA,UAAU,CAAC,MAAI;AACX,YAAM3B,GAAG,GAAG,uDAAZ;AACA,YAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYhB,WAAZ;AACAS,MAAAA,QAAQ,CAACE,MAAT,CAAgB,UAAhB,EAA4BX,WAA5B;AACAH,MAAAA,KAAK,CAACe,IAAN,CAAWJ,GAAX,EAAeC,QAAf,EAAyBI,IAAzB,CACKC,GAAD,IAAO;AACHC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACAV,QAAAA,MAAM,CAACO,GAAG,CAACG,IAAJ,CAASX,GAAT,CAAa,CAAb,CAAD,CAAN;AACH,OAJL,EAKEa,KALF,CAKSC,GAAD,IAAOL,OAAO,CAACC,GAAR,CAAYI,GAAZ,CALf;AAMH,KAXS,EAWR,GAXQ,CAAV;AAYAG,IAAAA,QAAQ,CAACC,cAAT,CAAwB,KAAxB,EAA+BY,SAA/B,GAA2CL,MAA3C;AACH,GAzBD;;AA2BA,SACI;AAAK,IAAA,SAAS,EAAG,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAG,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAI,IAAA,EAAE,EAAG,cAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA4B/B,WAA5B,+BADJ,EAEI;AAAG,IAAA,EAAE,EAAG,KAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAFJ,EAGI;AAAQ,IAAA,OAAO,EAAIqB,WAAnB;AAAgC,IAAA,EAAE,EAAG,UAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,EAII;AAAM,IAAA,SAAS,EAAG,aAAlB;AAAgC,IAAA,QAAQ,EAAEO,YAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,EAAE,EAAC,SAAR;AAAkB,IAAA,KAAK,EAAC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,KAAK,EAAC,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAM,IAAA,KAAK,EAAC,OAAZ;AAAoB,IAAA,OAAO,EAAID,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,EAEI;AAAO,IAAA,WAAW,EAAG,6BAArB;AAAmD,IAAA,IAAI,EAAG,QAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAGI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAHJ,CADJ,CADJ,CAJJ,CADJ,EAeI;AAAK,IAAA,SAAS,EAAG,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK1B,KAAK,CAACE,MAAN,GAAakC,MAAM,CAACC,MAAP,CAAcrC,KAAK,CAACE,MAApB,EAA4BoC,GAA5B,CAAiCC,GAAD,IAAS;AACnD,WACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAO,MAAA,QAAQ,MAAf;AAAgB,MAAA,KAAK,EAAG,KAAxB;AAA8B,MAAA,QAAQ,MAAtC;AAAuC,MAAA,KAAK,MAA5C;AAA6C,MAAA,IAAI,MAAjD;AAAkD,MAAA,GAAG,EAAIA,GAAG,CAAChC,GAA7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ;AAKH,GANa,CAAb,GAME,EAPP,CAfJ,CADJ;AA4BH;;AAED,eAAeT,aAAf","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport axios from 'axios';\nimport { AppContext } from '../context/AppContext';\nimport './MyProfilePage.css';\n\nfunction MyProfilePage() {\n\n\n    const {currentUser} = useContext(AppContext);\n    const [state, setState] = useState({\n        myVids: '',\n        new_myVids: undefined,\n    });\n    const [bio, setBio] = useState('');\n\n    useEffect(() => {\n        const url = 'http://localhost:80/react-backend/profile.php';\n        const formData = new FormData;\n        formData.append('uploader', currentUser);\n        axios.post(url, formData).then((res)=>{\n            console.log(res);\n            setState({myVids: res.data.video})\n        }).catch((err)=>console.log(err));\n    }, []);\n\n\n    const buttonClick = () => {\n        let modal = document.getElementById('myModal');\n        modal.style.display = \"block\";\n    };\n\n    const spanClick = () => {\n        let modal = document.getElementById('myModal');\n        modal.style.display = \"none\";\n    };\n   \n    const handleSubmit=(e) => {\n        e.preventDefault();\n        let newBio = e.target.newBio.value;\n        console.log(newBio);\n        // send the new username to php\n        document.getElementById('myModal').style.display = \"none\";\n        const add_bio_url = 'http://localhost:80/react-backend/profile_post_bio.php';\n        const formData = new FormData;\n        formData.append('newBio',newBio);\n        formData.append('username', currentUser);\n        axios.post(add_bio_url,formData).then((res)=>console.log(res.data)).catch((err)=>console.log(err));\n        // get the bio from the database and sent the data to state\n        setTimeout(()=>{\n            const url = 'http://localhost:80/react-backend/profile_get_bio.php';\n            const formData = new FormData;\n            console.log(currentUser);\n            formData.append('username', currentUser);\n            axios.post(url,formData).then(\n                (res)=>{\n                    console.log(res.data);\n                    setBio(res.data.bio[0]);\n                }\n            ).catch((err)=>console.log(err));\n        },500);\n        document.getElementById('bio').innerText = newBio;\n    };\n\n    return(\n        <div className = \"profilePage\">\n            <div className = \"welcomeTitle\">\n                <h1 id = \"welcomeTitle\">Hi {currentUser}, welcome to your profile!</h1>\n                <p id = \"bio\"> Write something about yourself...</p>\n                <button onClick = {buttonClick} id = \"resetBtn\">Edit Bio</button>\n                <form className = \"resetWindow\" onSubmit={handleSubmit}>\n                    <div id=\"myModal\" class=\"modal\">\n                        <div class=\"modal-content\">\n                            <span class=\"close\" onClick = {spanClick}>&times;</span>\n                            <input placeholder = \"Enter your new new Bio here\" name = \"newBio\"/>\n                            <button type=\"submit\">confirm</button>\n                        </div>\n                    </div>\n                </form>\n            </div>\n            <div className = \"vid-row\">\n                {state.myVids?Object.values(state.myVids).map((vid) => {\n                    return(\n                        <div className=\"video\">\n                            <video controls width = '350' autoPlay muted loop src = {vid.url} />\n                        </div>\n                    );\n                }):''}\n            </div>\n        </div>\n    );\n    \n}\n\nexport default MyProfilePage;"]},"metadata":{},"sourceType":"module"}